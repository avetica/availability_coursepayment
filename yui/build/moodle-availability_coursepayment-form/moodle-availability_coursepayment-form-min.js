YUI.add("moodle-availability_coursepayment-form",function(n,e){M.availability_coursepayment=M.availability_coursepayment||{},M.availability_coursepayment.form=n.Object(M.core_availability.plugin),M.availability_coursepayment.form.initInner=function(e){console.log("M.availability_coursepayment",e)},M.availability_coursepayment.form.getNode=function(e){var a,t,l,o;for(console.log("JSON",e),t="<label><b>"+(a=M.str.availability_coursepayment).title+'</b></label><br/><label for="cost">'+a.cost+' </label> <input type="text" class="form-control" placeholder="0.00" name="cost" title="'+a.cost+'" value="10"/><br/><label for="currency">'+a.currency+' </label><select name="currency" class="form-control" ><option value="EUR" selected="selected">Euro</option></select><br/><label for="vat">'+a.vat+' </label><br/><select name="vat" class="form-control" >',l=0;l<50;l++)t+="<option "+(21===l?'selected="selected"':"")+'value="'+l+'">'+l+"</option>";if(t+="</select>",o=n.Node.create("<div>"+t+"</div>"),e.cost!==undefined&&o.one("input[name=cost]").set("value",e.cost),e.currency!==undefined&&o.one("[name=currency]").set("value",e.currency),e.vat!==undefined&&o.one("[name=vat]").set("value",e.vat),!M.availability_coursepayment.form.addedEvents){M.availability_coursepayment.form.addedEvents=!0;try{n.one("#fitem_id_availabilityconditionsjson")||(console.log("Moodle 3.5 or higher ?"),n.one("#id_availabilityconditionsjson")),n.one("#page").delegate("change",function(){console.log("Change detected"),M.core_availability.form.update()},".availability_coursepayment > input, .availability_coursepayment > select")}catch(i){try{M.core_availability.form.update()}catch(i){}}}return o},M.availability_coursepayment.form.fillValue=function(e,a){e.cost=this.getValue("cost",a),e.currency=this.getValue("currency",a),e.vat=this.getValue("vat",a)},M.availability_coursepayment.form.getValue=function(e,a){var t;return(a=a.one("[name="+e+"]"))&&(t=(t=a.get("value")).replace(/,/g,".")),console.log("GetValue",e+" = "+t),new RegExp("^\\d.+$").test(t)?"vat"===e?(console.log("vat:"+t),parseInt(t)):parseFloat(t).toFixed(2):t},M.availability_coursepayment.form.fillErrors=function(e,a){var t={},l=new RegExp("^[\\d.]+$");this.fillValue(t,a),t.cost!==undefined&&(l.test(t.cost)||(console.log("cost - availability_coursepayment:error_invalidnumber"),e.push("availability_coursepayment:error_invalidnumber"))),t.vat!==undefined&&(l.test(t.vat)||(console.log("vat - availability_coursepayment:error_invalidnumber "+t.vat),e.push("availability_coursepayment:error_invalidnumber")))}},"@VERSION@");